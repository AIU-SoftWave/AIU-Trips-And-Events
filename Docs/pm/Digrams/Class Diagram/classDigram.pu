@startuml
scale 0.7
left to right direction

title University Trips & Events Management System - Class Diagram
skinparam classAttributeIconSize 0
skinparam linetype ortho

' ==================== INTERFACES ====================

interface IUserService {
  +registerUser(userData: UserDTO): User
  +loginUser(email: String, password: String): User
  +updateProfile(userId: int, profileData: UserDTO): boolean
  +getUserById(userId: int): User
  +validateCredentials(email: String, password: String): boolean
  +deleteUser(userId: int): boolean
}

interface IAuthenticationService {
  +authenticate(email: String, password: String): Token
  +validateToken(token: String): boolean
  +logout(token: String): boolean
  +resetPassword(email: String): boolean
  +generateToken(userId: int): Token
}

interface IEventService {
  +createEvent(eventData: EventDTO): Event
  +updateEvent(eventId: int, eventData: EventDTO): boolean
  +deleteEvent(eventId: int): boolean
  +getEventById(eventId: int): Event
  +getAllEvents(): List<Event>
  +searchEvents(criteria: SearchCriteria): List<Event>
}

interface ITripService {
  +createTrip(tripData: TripDTO): Trip
  +updateTrip(tripId: int, tripData: TripDTO): boolean
  +deleteTrip(tripId: int): boolean
  +getTripById(tripId: int): Trip
  +getAllTrips(): List<Trip>
  +searchTrips(criteria: SearchCriteria): List<Trip>
}

interface IBookingService {
  +createBooking(bookingData: BookingDTO): Booking
  +cancelBooking(bookingId: int): boolean
  +getBookingById(bookingId: int): Booking
  +getUserBookings(userId: int): List<Booking>
  +confirmBooking(bookingId: int): boolean
  +checkAvailability(eventId: int): int
}

interface ITicketService {
  +generateTicket(bookingId: int): Ticket
  +validateTicket(ticketId: int): boolean
  +getTicketByBooking(bookingId: int): Ticket
  +cancelTicket(ticketId: int): boolean
}

interface INotificationService {
  +sendNotification(notification: NotificationDTO): boolean
  +sendEmailNotification(email: String, message: String): boolean
  +sendSMSNotification(phone: String, message: String): boolean
  +getUserNotifications(userId: int): List<Notification>
  +markAsRead(notificationId: int): boolean
}

interface IReportService {
  +generateBookingReport(startDate: Date, endDate: Date): Report
  +generateRevenueReport(startDate: Date, endDate: Date): Report
  +generateUserActivityReport(userId: int): Report
  +generateEventPopularityReport(): Report
  +exportReport(reportId: int, format: String): File
}

interface IAnalyticsService {
  +getEventStatistics(eventId: int): Statistics
  +getUserEngagementMetrics(): Metrics
  +getTrendAnalysis(period: String): TrendData
  +getBookingPatterns(): PatternData
}

' ==================== CONCRETE CLASSES ====================

class User {
  -userId: int
  -email: String
  -password: String
  -firstName: String
  -lastName: String
  -phone: String
  -role: UserRole
  -createdAt: Date
  -isActive: boolean
}

class Student {
  -studentId: String
  -university: String
  -major: String
  -enrollmentYear: int
}

class Organizer {
  -organizerId: int
  -organizationName: String
  -licenseNumber: String
  -rating: double
  -verificationStatus: boolean
}

class Admin {
  -adminId: int
  -permissions: List<String>
  -department: String
}

class Event {
  -eventId: int
  -title: String
  -description: String
  -eventDate: Date
  -location: String
  -capacity: int
  -availableSeats: int
  -price: double
  -category: String
  -status: EventStatus
  -createdBy: int
}

class Trip {
  -tripId: int
  -destination: String
  -startDate: Date
  -endDate: Date
  -duration: int
  -price: double
  -capacity: int
  -itinerary: String
  -includedServices: List<String>
  -transportationType: String
}

class Booking {
  -bookingId: int
  -userId: int
  -eventId: int
  -bookingDate: Date
  -numberOfSeats: int
  -totalAmount: double
  -status: BookingStatus
}

class Ticket {
  -ticketId: int
  -bookingId: int
  -ticketNumber: String
  -qrCode: String
  -issueDate: Date
  -validUntil: Date
  -isValid: boolean
}

class Notification {
  -notificationId: int
  -userId: int
  -title: String
  -message: String
  -type: NotificationType
  -sentAt: Date
  -isRead: boolean
}

class Report {
  -reportId: int
  -reportType: String
  -generatedBy: int
  -generatedAt: Date
  -data: String
  -format: String
}

' ==================== SERVICE IMPLEMENTATIONS ====================

class UserServiceImpl {
}

class AuthenticationServiceImpl {
}

class EventServiceImpl {
}

class TripServiceImpl {
}

class BookingServiceImpl {
}

class TicketServiceImpl {
}

class NotificationServiceImpl {
}

class ReportServiceImpl {
}

class AnalyticsServiceImpl {
}

' ==================== RELATIONSHIPS ====================

' Service Implementations implement Interfaces
UserServiceImpl ..|> IUserService
AuthenticationServiceImpl ..|> IAuthenticationService
EventServiceImpl ..|> IEventService
TripServiceImpl ..|> ITripService
BookingServiceImpl ..|> IBookingService
TicketServiceImpl ..|> ITicketService
NotificationServiceImpl ..|> INotificationService
ReportServiceImpl ..|> IReportService
AnalyticsServiceImpl ..|> IAnalyticsService

' Service Implementations depend on Interfaces (not concrete classes)
UserServiceImpl ..> IAuthenticationService : uses
BookingServiceImpl ..> IEventService : uses
BookingServiceImpl ..> ITripService : uses
BookingServiceImpl ..> IUserService : uses
BookingServiceImpl ..> INotificationService : uses
TicketServiceImpl ..> IBookingService : uses
EventServiceImpl ..> INotificationService : uses
TripServiceImpl ..> INotificationService : uses
ReportServiceImpl ..> IBookingService : uses
AnalyticsServiceImpl ..> IEventService : uses
AnalyticsServiceImpl ..> IBookingService : uses

' Inheritance relationships
Student --|> User
Organizer --|> User
Admin --|> User
Trip --|> Event

' Service Implementations work with Entity classes
UserServiceImpl --> User : manages
EventServiceImpl --> Event : manages
TripServiceImpl --> Trip : manages
BookingServiceImpl --> Booking : manages
TicketServiceImpl --> Ticket : manages
NotificationServiceImpl --> Notification : manages
ReportServiceImpl --> Report : manages

' Associations between entities
Booking "1" -- "1" Ticket : generates >
Booking "*" -- "1" User
Booking "*" -- "1" Event
Notification "*" -- "1" User

note top of IUserService
  All concrete classes communicate
  through interfaces, following
  Dependency Inversion Principle
end note

note bottom of UserServiceImpl
  Service implementations depend on
  interfaces, not concrete classes.
  This promotes loose coupling and
  makes the system more maintainable.
end note
@enduml