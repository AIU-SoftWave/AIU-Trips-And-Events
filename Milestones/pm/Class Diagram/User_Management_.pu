@startuml User_Management_Updated

!define INTERFACE_COLOR #E8F5E9
!define SERVICE_COLOR #F3E5F5
!define ENTITY_COLOR #E3F2FD

skinparam classAttributeIconSize 0
skinparam class {
    BackgroundColor<<interface>> INTERFACE_COLOR
    BackgroundColor<<service>> SERVICE_COLOR
    BackgroundColor<<entity>> ENTITY_COLOR
}

package "User Management Component" {
    
    ' Interface from Context Level
    interface IAuthenticationUserManagement <<interface>> {
        +register(userData: UserDTO): Response
        +login(email: String, password: String): AuthToken
        +verifyEmail(token: String): Response
        +resetPassword(email: String): Response
        +manageUserRole(userId: String, role: UserRole): Response
    }
    
    ' Service Implementation (Realization)
    class UserManagementService <<service>> {
        -IUserRepository userRepository
        -IAuthService authService
        -IEmailService emailService
        +register(userData: UserDTO): Response
        +login(email: String, password: String): AuthToken
        +verifyEmail(token: String): Response
        +resetPassword(email: String): Response
        +manageUserRole(userId: String, role: UserRole): Response
    }
    
    ' Repository Interface
    interface IUserRepository <<interface>> {
        +save(user: User): User
        +findByEmail(email: String): User
        +update(user: User): User
    }
    
    ' Supporting Service Interfaces
    interface IAuthService <<interface>> {
        +generateToken(userId: String, role: UserRole): AuthToken
        +validateToken(token: String): Boolean
    }
    
    interface IEmailService <<interface>> {
        +sendEmail(to: String, subject: String, body: String): Response
    }
    
    ' Entity
    class User <<entity>> {
        -String userId
        -String email
        -String firstName
        -String lastName
        -String phoneNumber
        -String passwordHash
        -UserRole role
        -Boolean isVerified
    }
    
    ' Relationships (Professional)
    IAuthenticationUserManagement <|.. UserManagementService : realizes
    UserManagementService o-- IUserRepository : aggregation
    UserManagementService o-- IAuthService : aggregation
    UserManagementService o-- IEmailService : aggregation
    IUserRepository ..> User : manages
}

note right of UserManagementService
  *SOLID Principles:*
  - Single Responsibility
  - Dependency Inversion
  
  *Relations:*
  - Aggregation (o--) with repositories
  - Realization (<|..) of interface
end note

@enduml