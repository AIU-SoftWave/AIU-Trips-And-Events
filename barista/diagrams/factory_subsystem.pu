@startuml Factory Subsystem

' ==================== Color Definitions ====================
!define FACTORY_COLOR #FFF9C4
!define INTERFACE_COLOR #E8F5E9
!define ABSTRACT_COLOR #FFF3E0

skinparam classAttributeIconSize 0
skinparam class {
    BackgroundColor<<factory>> FACTORY_COLOR
    BackgroundColor<<interface>> INTERFACE_COLOR
    BackgroundColor<<abstract>> ABSTRACT_COLOR
}

title Factory Subsystem

together {
    ' External interfaces (from other subsystems) - positioned above
    interface IDrinkDirector <<interface>> {
        +buildCoffee(builder, type): ICoffee
        +buildTea(builder, type): ITea
    }

    interface IBuilder <<interface>> {
        +createCoffeeBuilder(): CoffeeBuilder
        +createTeaBuilder(): TeaBuilder
    }
}

together {
    interface ICoffee <<interface>>
    interface ITea <<interface>>
}

package "Factory Subsystem" <<Rectangle>> #FFF9C4 {
    
    ' Abstract Factory (exposed to other subsystems)
    abstract class AFactory <<abstract>> {
        +{abstract} createCoffee(): ICoffee
        +{abstract} createTea(): ITea
    }
    
    class ClassicFactory <<factory>> {
        -director: IDrinkDirector
        -builder: IBuilder
        +ClassicFactory()
        +createCoffee(): ICoffee
        +createTea(): ITea
    }
    
    class DietFactory <<factory>> {
        -director: IDrinkDirector
        -builder: IBuilder
        +DietFactory()
        +createCoffee(): ICoffee
        +createTea(): ITea
    }
    
    ClassicFactory --|> AFactory
    DietFactory --|> AFactory

}

' Layout hints
IDrinkDirector -[hidden]down- "Factory Subsystem"
IBuilder -[hidden]down- "Factory Subsystem"

' Relationships
ClassicFactory -up-> IDrinkDirector : uses
ClassicFactory -up-> IBuilder : uses
DietFactory -up-> IDrinkDirector : uses
DietFactory -up-> IBuilder : uses
AFactory ..> ICoffee : returns
AFactory ..> ITea : returns

@enduml
